{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\n\nexport async function fetchImages(searchQueryResult, currentPage) {\n  try {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const q = searchQueryResult.trim().split(',').join('+');\n    const params = new URLSearchParams({\n      key: '42946583-b9bd64904b8b2d582b051d84e',\n      q: q,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page: currentPage,\n    });\n    const url = `${BASE_URL}?${params}`;\n    const res = await axios.get(url);\n    return res.data;\n  } catch (error) {\n    iziToast.error({\n      message: 'Server error!',\n      position: 'topRight',\n    });\n    return console.log(error);\n  }\n}\n","import { gallery } from '../main';\n\nexport function renderGallery(data) {\n  const createMarkup = data.hits\n    .map(hit => {\n      const {\n        id,\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      } = hit;\n      return `\n    <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" id=${id} src=\"${webformatURL}\" alt=\"${tags}\"/>\n        </a>\n        <div class=\"gallery-item-info\">\n          <div class=\"item-info-atr\">\n          <h3>Likes</h3>\n          <p>${likes}</p>\n          </div>\n          <div class=\"item-info-atr\">\n          <h3>Views</h3>\n          <p>${views}</p>\n          </div>\n          <div class=\"item-info-atr\">\n          <h3>Comments</h3>\n          <p>${comments}</p>\n          </div>\n          <div class=\"item-info-atr\">\n          <h3>Downloads</h3>\n          <p>${downloads}</p>\n          </div>\n        </div>\n    </li>\n    `;\n    })\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', createMarkup);\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { fetchImages } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\n\nexport const gallery = document.querySelector('.gallery');\nconst searchForm = document.querySelector('#search-form');\nconst loadMoreBtn = document.querySelector('#load-more-btn');\nconst elemLoader = document.querySelector('#loader');\nlet searchQueryResult;\nlet totalPage;\nlet currentPage = 1;\nconst maxPage = 15;\nlet data;\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n  gallery.innerHTML = '';\n  const searchQueryResult = event.target.elements.query.value;\n  if (searchQueryResult.trim() == '') {\n    iziToast.warning({\n      message: `The search field is empty. Please try again!`,\n      position: 'topRight',\n    });\n    hideButton();\n    searchForm.reset();\n    return;\n  } else {\n    try {\n      showElemLoader();\n      data = await fetchImages(searchQueryResult, currentPage);\n      totalPage = Math.ceil(data.totalHits / maxPage);\n      if (!data.hits.length) {\n        hideElemLoader();\n        hideButton();\n        iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please try again.',\n          position: 'topRight',\n        });\n      } else {\n        hideElemLoader();\n        renderGallery(data);\n        lightbox.refresh();\n        checkBtnStatus();\n      }\n    } catch (error) {\n      hideElemLoader();\n      iziToast.error({\n        message: `Error render gallery. Please try again!`,\n        position: 'topRight',\n      });\n    }\n    searchForm.reset();\n  }\n});\n\nloadMoreBtn.addEventListener('click', onLoadMoreBtn);\nasync function onLoadMoreBtn() {\n  currentPage += 1;\n  showElemLoader();\n  try {\n    data = await fetchImages(searchQueryResult, currentPage);\n    renderGallery(data);\n    lightbox.refresh();\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      message: 'Error next render gallery',\n    });\n    return console.log(error);\n  }\n  hideElemLoader();\n  checkBtnStatus();\n}\n\nfunction checkBtnStatus() {\n  if (currentPage >= totalPage) {\n    hideButton();\n    iziToast.info({\n      message: \"We're sorry, there are no more images to load\",\n      position: 'topRight',\n    });\n  } else {\n    showButton();\n  }\n}\n\nfunction hideButton() {\n  loadMoreBtn.classList.add('is-hidden');\n}\nfunction showButton() {\n  loadMoreBtn.classList.remove('is-hidden');\n}\n\nfunction hideElemLoader() {\n  elemLoader.classList.add('is-hidden');\n}\nfunction showElemLoader() {\n  elemLoader.classList.remove('is-hidden');\n}\n"],"names":["fetchImages","searchQueryResult","currentPage","BASE_URL","q","params","url","axios","error","iziToast","renderGallery","data","createMarkup","hit","id","webformatURL","largeImageURL","tags","likes","views","comments","downloads","gallery","searchForm","loadMoreBtn","elemLoader","totalPage","maxPage","lightbox","SimpleLightbox","event","hideButton","showElemLoader","hideElemLoader","checkBtnStatus","onLoadMoreBtn","showButton"],"mappings":"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"}