{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\n\nexport async function fetchImages(searchQueryResult, currentPage) {\n  try {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const q = searchQueryResult.trim().split(',').join('+');\n    const params = new URLSearchParams({\n      key: '42946583-b9bd64904b8b2d582b051d84e',\n      q: q,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page: currentPage,\n    });\n    const url = `${BASE_URL}?${params}`;\n    const res = await axios.get(url);\n    return res.data;\n  } catch (error) {\n    return iziToast.error({\n      message: 'Server error!',\n      position: 'topRight',\n    });\n  }\n}\n","import { gallery } from '../main';\n\nexport function renderGallery(data) {\n  const createMarkup = data.hits\n    .map(hit => {\n      const {\n        id,\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      } = hit;\n      return `\n    <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" id=${id} src=\"${webformatURL}\" alt=\"${tags}\"/>\n        </a>\n        <div class=\"gallery-item-info\">\n          <div class=\"item-info-atr\">\n          <h3>Likes</h3>\n          <p>${likes}</p>\n          </div>\n          <div class=\"item-info-atr\">\n          <h3>Views</h3>\n          <p>${views}</p>\n          </div>\n          <div class=\"item-info-atr\">\n          <h3>Comments</h3>\n          <p>${comments}</p>\n          </div>\n          <div class=\"item-info-atr\">\n          <h3>Downloads</h3>\n          <p>${downloads}</p>\n          </div>\n        </div>\n    </li>\n    `;\n    })\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', createMarkup);\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImages } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\n\nexport const gallery = document.querySelector('.gallery');\nconst searchForm = document.querySelector('#search-form');\nconst loadMoreBtn = document.querySelector('#load-more-btn');\nconst elemLoader = document.querySelector('#loader');\nlet searchQueryResult;\nlet maxPage = 0;\nlet currentPage = 1;\nconst pageSize = 15;\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nloadMoreBtn.addEventListener('click', onLoadMoreBtn);\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n  gallery.innerHTML = '';\n  const searchQueryResult = event.target.elements.query.value;\n  if (searchQueryResult.trim() == '') {\n    iziToast.warning({\n      message: `The search field is empty. Please try again!`,\n      position: 'topRight',\n    });\n    hideButton();\n    searchForm.reset();\n    return;\n  } else {\n    try {\n      showElemLoader();\n      const data = await fetchImages(searchQueryResult, currentPage);\n      maxPage = Math.ceil(data.totalHits / pageSize);\n      if (!data.hits.length) {\n        hideElemLoader();\n        hideButton();\n        iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please try again.',\n          position: 'topRight',\n        });\n      } else {\n        hideElemLoader();\n        renderGallery(data);\n        lightbox.refresh();\n        checkBtnStatus();\n      }\n    } catch (error) {\n      hideElemLoader();\n      iziToast.error({\n        message: `Error render gallery. Please try again!`,\n        position: 'topRight',\n      });\n    }\n    searchForm.reset();\n  }\n});\n\nasync function onLoadMoreBtn() {\n  currentPage += 1;\n  showElemLoader();\n  try {\n    const data = await fetchImages(searchQueryResult, currentPage);\n    renderGallery(data);\n    lightbox.refresh();\n    window.scrollBy({\n      top: 578,\n      behavior: 'smooth',\n    });\n  } catch (err) {\n    iziToast.error({\n      position: 'topRight',\n      message: 'ERROR',\n    });\n  }\n  hideElemLoader();\n  checkBtnStatus();\n}\n\nfunction checkBtnStatus() {\n  if (currentPage >= maxPage) {\n    hideButton();\n    iziToast.info({\n      message: \"We're sorry, there are no more posts to load\",\n      position: 'topRight',\n    });\n  } else {\n    showButton();\n  }\n}\n\nfunction hideButton() {\n  loadMoreBtn.classList.add('is-hidden');\n}\nfunction showButton() {\n  loadMoreBtn.classList.remove('is-hidden');\n}\n\nfunction hideElemLoader() {\n  elemLoader.classList.add('is-hidden');\n}\nfunction showElemLoader() {\n  elemLoader.classList.remove('is-hidden');\n}\n\n// console.log(data);\n// console.log(data.hits);\n// console.log(data.totalHits);\n\n// console.log(searchQueryResult);\n// console.log(data);\n// console.log(data.hits);\n// console.log(data.totalHits);\n"],"names":["fetchImages","searchQueryResult","currentPage","BASE_URL","q","params","url","axios","iziToast","renderGallery","data","createMarkup","hit","id","webformatURL","largeImageURL","tags","likes","views","comments","downloads","gallery","searchForm","loadMoreBtn","elemLoader","maxPage","pageSize","lightbox","SimpleLightbox","onLoadMoreBtn","event","hideButton","showElemLoader","hideElemLoader","checkBtnStatus","showButton"],"mappings":"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"}